CÃ³mo crear un dispositivo headless  con puredata corriendo en  una Raspberry Pi Zero 2w usando el weird audio hat como interfaz de audio.

Para que el parche de puredata se ejecute automaticamente al iniciar el sistema


1.Automatizar el inicio del parche del puredata.
Cada objeto que se desee iniciar por ejemplo DSP debe recibir un mensaje 1 activado por un objeto loadbang.
[loadbang] - [; pd dsp 1(

Encontrar la ruta del ejecutable si hace falta
usar comando
which puredata 
para obtener la ruta.

Editar archivo de autostart
sudo nano /etc/xdg/lxsession/LXDE-pi/autostart
AÃ±adir al final la lÃ­nea
 @puredata (mas el nombre del archivo para abrir)
ejemplo:
@puredata test.pd

4.Reiniciar para verificar que el programa se ejecute automÃ¡ticamente.


Para que que se guarde la configuraciÃ³n de la interfaz de audio predeterminada en puredata (ejemplo weird hat)

si con â€œsave all settingsâ€ no queda guardada  al reiniciar, probar conâ€¦

1.Crear el script de inicio
nano /home/weird/start_pd_patch.sh

AÃ±adir las lÃ­neas
#!/bin/bash
/usr/bin/pd -alsa -nogui -audiooutdev wm8960soundcard /home/weird/tu_patch.pd

(command o ctrl  â€œoâ€ y enter para guardar y command o ctrl  â€œxâ€ para cerrar)


Para guardar la configuraciÃ³n de ALSAMIXER si la raspberry se va a reiniciar correctamente desde el reboot o desde el shutdown

sudo alsactl store
si con este comando la configuraciÃ³n no quedÃ² guardada al reiniciar, probar conâ€¦

Para que se habilite el ON y OF left y right del alsamixer que por default cada vez que se reinicializa la raspberry arrancan en MUTE
 
1.Crear un  script
nano /home/weird/unmute_audio.sh
AÃ±adir las lÃ­neas
#!/bin/bash
#Unmute Left and Right Outputs


amixer -c 1 set 'Left Out  Mixer DACâ€™ unmute
amixer -c 1 set 'Right Out  Mixer DACâ€™ unmute

(En el caso del weird audio hat- en alsamixer, encuentran los nombres que correspondan a sus salidas, en este caso son estas)

(command o ctrl  â€œoâ€ y enter para guardar y command o ctrl  â€œxâ€ para cerrar)


2.Crear un ejecutable automÃ¡tico dentro del 
sudo nano /etc/rc.local
AÃ±adir las lÃ­neas
sleep 10
/home/weird/unmute_audio.sh
(antes del exit 0)


(command o ctrl  â€œoâ€ y enter para guardar y command o ctrl  â€œxâ€ para cerrar)



3.Recorda hacer los  scripts que creaste ejecutables con:
chmod +x /home/weird/start_pd_patch.sh
chmod +x  /home/weird/unmute_audio.sh

Y todo esto deberÃ­a bastar ğŸ™‚